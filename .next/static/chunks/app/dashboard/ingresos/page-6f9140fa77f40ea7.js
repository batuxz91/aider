(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{2601:function(e,t,s){"use strict";var r,n;e.exports=(null==(r=s.g.process)?void 0:r.env)&&"object"==typeof(null==(n=s.g.process)?void 0:n.env)?s.g.process:s(8960)},209:function(e,t,s){Promise.resolve().then(s.bind(s,8929))},8929:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return IngresosPage}});var r=s(7437),n=s(2265),a=s(8069),i=s(9843);let ExpenseService=class ExpenseService{async getExpenses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await i.x.get("/expenses",e);return t.data}async getAllExpenses(){let e=await i.x.get("/expenses/all");return e.data}async getExpenseById(e){let t=await i.x.get("/expenses/".concat(e));return t.data}async createExpense(e){let t=await i.x.post("/expenses",e);return t.data}async updateExpense(e,t){let s=await i.x.put("/expenses/".concat(e),t);return s.data}async deleteExpense(e){await i.x.delete("/expenses/".concat(e))}async voidExpense(e){let t=await i.x.post("/expenses/".concat(e,"/void"));return t.data}async getExpenseSummary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await i.x.get("/expenses/summary",e);return t.data}async getExpensesByCategory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await i.x.get("/expenses/by-category",e);return t.data}};let o=new ExpenseService;function IngresosPage(){let{isAuthenticated:e}=(0,a.a)(),[t,s]=(0,n.useState)([]),[i,c]=(0,n.useState)(!0),[l,d]=(0,n.useState)(""),[u,x]=(0,n.useState)({page:0,size:20});(0,n.useEffect)(()=>{let fetchIngresos=async()=>{try{let e=await o.getExpenses(u);s(e.content)}catch(e){d(e.message||"Error al cargar los ingresos")}finally{c(!1)}};e&&fetchIngresos()},[e,u]);let p=t.reduce((e,t)=>e+t.amount,0),h=t.filter(e=>!e.isVoid).reduce((e,t)=>e+t.amount,0);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Ingresos"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Gestiona todos los ingresos de tu empresa agropecuaria"})]}),(0,r.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"+ Nuevo Ingreso"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-green-600 text-lg",children:"\uD83D\uDCB0"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Ingresos"}),(0,r.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:["$",p.toLocaleString("es-AR")]})]})]})}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-yellow-600 text-lg",children:"⏳"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Pendiente de Cobro"}),(0,r.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:["$",h.toLocaleString("es-AR")]})]})]})}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-blue-600 text-lg",children:"\uD83D\uDCCA"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Registros"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:t.length})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Desde"}),(0,r.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Hasta"}),(0,r.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar cliente...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,r.jsx)("option",{value:"",children:"Todos"}),(0,r.jsx)("option",{value:"Cobrado",children:"Cobrado"}),(0,r.jsx)("option",{value:"Pendiente",children:"Pendiente"})]})]})]}),(0,r.jsx)("div",{className:"mt-4 flex justify-end",children:(0,r.jsx)("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Filtrar"})})]}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Concepto"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proyecto"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IVA"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:9,className:"px-6 py-4 text-center text-gray-500",children:"Cargando ingresos..."})}):l?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:9,className:"px-6 py-4 text-center text-red-500",children:l})}):0===t.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:9,className:"px-6 py-4 text-center text-gray-500",children:"No hay ingresos registrados"})}):t.map(e=>{var t,s;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString("es-AR")}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null===(t=e.provider)||void 0===t?void 0:t.name)||"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.description}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null===(s=e.business)||void 0===s?void 0:s.name)||"N/A"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.amount.toLocaleString("es-AR")]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",(.21*e.amount).toLocaleString("es-AR")]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",(1.21*e.amount).toLocaleString("es-AR")]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isVoid?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.isVoid?"Anulado":"Activo"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,r.jsx)("button",{className:"text-green-600 hover:text-green-900 mr-3",children:"Editar"}),(0,r.jsx)("button",{className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},e.id)})})]})})})]})}},9843:function(e,t,s){"use strict";s.d(t,{x:function(){return a}});var r=s(2601);let n=r.env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api";let ApiClient=class ApiClient{setToken(e){this.token=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseURL).concat(e),r={"Content-Type":"application/json",...t.headers};this.token&&(r.Authorization="Bearer ".concat(this.token));try{let e=await fetch(s,{...t,headers:r}),n=await e.json();if(!e.ok)throw{message:n.message||"Error en la solicitud",status:e.status,details:n};return{data:n,success:!0}}catch(e){if(e instanceof Error)throw{message:e.message,status:0};throw e}}async get(e,t){let s=new URL(e,this.baseURL);return t&&Object.entries(t).forEach(e=>{let[t,r]=e;null!=r&&s.searchParams.append(t,String(r))}),this.request(s.pathname+s.search)}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}constructor(e){this.token=null,this.baseURL=e,this.token=localStorage.getItem("token")}};let a=new ApiClient(n)},8069:function(e,t,s){"use strict";s.d(t,{H:function(){return AuthProvider},a:function(){return useAuth}});var r=s(7437),n=s(2265),a=s(9843);let AuthService=class AuthService{async login(e){let t=await a.x.post("/users/login",e);return t.data.token&&a.x.setToken(t.data.token),t.data}async register(e){let t=await a.x.post("/users/register",e);return t.data}async getCurrentUser(){let e=await a.x.get("/users/me");return e.data}async getUserProfile(){let e=await a.x.get("/users/profile");return e.data}async updateProfile(e){let t=await a.x.put("/users/me",e);return t.data}async completeProfile(e){let t=await a.x.post("/users/complete-profile",e);return t.data}async changePassword(e){await a.x.post("/users/change-password",e)}async forgotPassword(e){await a.x.post("/users/forgot-password",{email:e})}async resetPassword(e,t){await a.x.post("/users/reset-password",{token:e,newPassword:t})}async checkEmailExists(e){let t=await a.x.get("/users/exists?email=".concat(e));return t.data.exists}async deleteAccount(){await a.x.delete("/users/me"),this.logout()}logout(){a.x.setToken(null)}isAuthenticated(){return null!==a.x.token}getToken(){return a.x.token}};let i=new AuthService,o=(0,n.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[s,a]=(0,n.useState)(null),[c,l]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let checkAuth=async()=>{try{if(i.isAuthenticated()){let e=await i.getCurrentUser();a(e)}}catch(e){console.error("Error checking authentication:",e),i.logout()}finally{l(!1)}};checkAuth()},[]);let login=async e=>{try{let t=await i.login(e);a(t.user)}catch(e){throw console.error("Login error:",e),e}},register=async e=>{try{let t=await i.register(e);a(t)}catch(e){throw console.error("Registration error:",e),e}},updateUser=async e=>{try{let t=await i.updateProfile(e);a(t)}catch(e){throw console.error("Update user error:",e),e}};return(0,r.jsx)(o.Provider,{value:{user:s,isLoading:c,isAuthenticated:!!s,login,register,logout:()=>{i.logout(),a(null)},updateUser},children:t})}function useAuth(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8960:function(e){!function(){var t={229:function(e){var t,s,r,n=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}function runClearTimeout(e){if(s===clearTimeout)return clearTimeout(e);if((s===defaultClearTimeout||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{s="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){s=defaultClearTimeout}}();var a=[],i=!1,o=-1;function cleanUpNextTick(){i&&r&&(i=!1,r.length?a=r.concat(a):o=-1,a.length&&drainQueue())}function drainQueue(){if(!i){var e=runTimeout(cleanUpNextTick);i=!0;for(var t=a.length;t;){for(r=a,a=[];++o<t;)r&&r[o].run();o=-1,t=a.length}r=null,i=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];a.push(new Item(e,t)),1!==a.length||i||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=noop,n.addListener=noop,n.once=noop,n.off=noop,n.removeListener=noop,n.removeAllListeners=noop,n.emit=noop,n.prependListener=noop,n.prependOnceListener=noop,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},s={};function __nccwpck_require__(e){var r=s[e];if(void 0!==r)return r.exports;var n=s[e]={exports:{}},a=!0;try{t[e](n,n.exports,__nccwpck_require__),a=!1}finally{a&&delete s[e]}return n.exports}__nccwpck_require__.ab="//";var r=__nccwpck_require__(229);e.exports=r}()},622:function(e,t,s){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=s(2265),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,s){var r,a={},l=null,d=null;for(r in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:n,type:e,key:l,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=q,t.jsxs=q},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=209)}),_N_E=e.O()}]);