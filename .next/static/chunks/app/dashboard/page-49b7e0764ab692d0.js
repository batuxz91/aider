(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{2601:function(e,t,r){"use strict";var s,a;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(8960)},3810:function(e,t,r){Promise.resolve().then(r.bind(r,4183))},4183:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return DashboardPage}});var s=r(7437),a=r(2265),n=r(8069),i=r(9843);let DashboardService=class DashboardService{async getDashboardData(){let e=await i.x.get("/dashboard");return e.data}async getProjects(){let e=await i.x.get("/dashboard/projects");return e.data}async getFinancialSummary(e){let t=await i.x.get("/dashboard/summary",{businessId:e});return t.data}async getMetrics(e){let t=await i.x.get("/dashboard/metrics",{businessId:e});return t.data}async getRecentActivity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=await i.x.get("/dashboard/recent-activity",{limit:e});return t.data}async getChartsData(e,t){let r=await i.x.get("/dashboard/charts-data",{businessId:e,year:t});return r.data}};let o=new DashboardService;function DashboardPage(){var e,t,r,i,c;let{user:l,isAuthenticated:d}=(0,n.a)(),[u,h]=(0,a.useState)(null),[m,g]=(0,a.useState)(!0),[x,f]=(0,a.useState)("");if((0,a.useEffect)(()=>{let fetchDashboardData=async()=>{try{let e=await o.getDashboardData();h(e)}catch(e){f(e.message||"Error al cargar los datos")}finally{g(!1)}};d&&fetchDashboardData()},[d]),m)return(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando dashboard..."})]})});if(x)return(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md",children:x});let p=[{name:"Ingresos del Mes",value:"$".concat((null==u?void 0:null===(e=u.totalIncome)||void 0===e?void 0:e.toLocaleString("es-AR"))||"0"),change:"+12%",changeType:"positive"},{name:"Egresos del Mes",value:"$".concat((null==u?void 0:null===(t=u.totalExpenses)||void 0===t?void 0:t.toLocaleString("es-AR"))||"0"),change:"+5%",changeType:"negative"},{name:"Ganancia Neta",value:"$".concat((null==u?void 0:null===(r=u.netProfit)||void 0===r?void 0:r.toLocaleString("es-AR"))||"0"),change:"+8%",changeType:"positive"},{name:"Proyectos Activos",value:(null==u?void 0:null===(i=u.activeProjects)||void 0===i?void 0:i.toString())||"0",change:"+2",changeType:"positive"}],v=(null==u?void 0:null===(c=u.recentActivity)||void 0===c?void 0:c.map(e=>({id:e.id,description:e.description,amount:"$".concat(e.amount.toLocaleString("es-AR")),type:"INCOME"===e.type?"ingreso":"egreso",date:e.date})))||[];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Resumen de tu gesti\xf3n financiera agropecuaria"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:p.map(e=>(0,s.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,s.jsx)("div",{className:"p-5",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat("positive"===e.changeType?"bg-green-100":"bg-red-100"),children:(0,s.jsx)("span",{className:"text-sm font-medium ".concat("positive"===e.changeType?"text-green-600":"text-red-600"),children:"positive"===e.changeType?"↗":"↘"})})}),(0,s.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:e.name}),(0,s.jsxs)("dd",{className:"flex items-baseline",children:[(0,s.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:e.value}),(0,s.jsx)("div",{className:"ml-2 flex items-baseline text-sm font-semibold ".concat("positive"===e.changeType?"text-green-600":"text-red-600"),children:e.change})]})]})})]})})},e.name))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Ingresos vs Egresos"}),(0,s.jsx)("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Gr\xe1fico de ingresos vs egresos"})})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Transacciones Recientes"})}),(0,s.jsx)("div",{className:"divide-y divide-gray-200",children:v.map(e=>(0,s.jsx)("div",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.description}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.date).toLocaleDateString("es-AR")})]}),(0,s.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,s.jsxs)("p",{className:"text-sm font-medium ".concat("ingreso"===e.type?"text-green-600":"text-red-600"),children:["ingreso"===e.type?"+":"-",e.amount]})})]})},e.id))}),(0,s.jsx)("div",{className:"px-6 py-3 bg-gray-50",children:(0,s.jsx)("a",{href:"/dashboard/ingresos",className:"text-sm font-medium text-green-600 hover:text-green-500",children:"Ver todas las transacciones →"})})]})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Acciones R\xe1pidas"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("a",{href:"/dashboard/ingresos/nuevo",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-green-600 text-lg",children:"+"})})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Nuevo Ingreso"})})]}),(0,s.jsxs)("a",{href:"/dashboard/egresos/nuevo",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-red-600 text-lg",children:"-"})})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Nuevo Egreso"})})]}),(0,s.jsxs)("a",{href:"/dashboard/liquidaciones/nueva",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-blue-600 text-lg",children:"\uD83D\uDCC4"})})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Nueva Liquidaci\xf3n"})})]}),(0,s.jsxs)("a",{href:"/dashboard/reportes",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-purple-600 text-lg",children:"\uD83D\uDCCA"})})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Ver Reportes"})})]})]})]})]})}},9843:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});var s=r(2601);let a=s.env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api";let ApiClient=class ApiClient{setToken(e){this.token=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseURL).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token));try{let e=await fetch(r,{...t,headers:s}),a=await e.json();if(!e.ok)throw{message:a.message||"Error en la solicitud",status:e.status,details:a};return{data:a,success:!0}}catch(e){if(e instanceof Error)throw{message:e.message,status:0};throw e}}async get(e,t){let r=new URL(e,this.baseURL);return t&&Object.entries(t).forEach(e=>{let[t,s]=e;null!=s&&r.searchParams.append(t,String(s))}),this.request(r.pathname+r.search)}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}constructor(e){this.token=null,this.baseURL=e,this.token=localStorage.getItem("token")}};let n=new ApiClient(a)},8069:function(e,t,r){"use strict";r.d(t,{H:function(){return AuthProvider},a:function(){return useAuth}});var s=r(7437),a=r(2265),n=r(9843);let AuthService=class AuthService{async login(e){let t=await n.x.post("/users/login",e);return t.data.token&&n.x.setToken(t.data.token),t.data}async register(e){let t=await n.x.post("/users/register",e);return t.data}async getCurrentUser(){let e=await n.x.get("/users/me");return e.data}async getUserProfile(){let e=await n.x.get("/users/profile");return e.data}async updateProfile(e){let t=await n.x.put("/users/me",e);return t.data}async completeProfile(e){let t=await n.x.post("/users/complete-profile",e);return t.data}async changePassword(e){await n.x.post("/users/change-password",e)}async forgotPassword(e){await n.x.post("/users/forgot-password",{email:e})}async resetPassword(e,t){await n.x.post("/users/reset-password",{token:e,newPassword:t})}async checkEmailExists(e){let t=await n.x.get("/users/exists?email=".concat(e));return t.data.exists}async deleteAccount(){await n.x.delete("/users/me"),this.logout()}logout(){n.x.setToken(null)}isAuthenticated(){return null!==n.x.token}getToken(){return n.x.token}};let i=new AuthService,o=(0,a.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[r,n]=(0,a.useState)(null),[c,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let checkAuth=async()=>{try{if(i.isAuthenticated()){let e=await i.getCurrentUser();n(e)}}catch(e){console.error("Error checking authentication:",e),i.logout()}finally{l(!1)}};checkAuth()},[]);let login=async e=>{try{let t=await i.login(e);n(t.user)}catch(e){throw console.error("Login error:",e),e}},register=async e=>{try{let t=await i.register(e);n(t)}catch(e){throw console.error("Registration error:",e),e}},updateUser=async e=>{try{let t=await i.updateProfile(e);n(t)}catch(e){throw console.error("Update user error:",e),e}};return(0,s.jsx)(o.Provider,{value:{user:r,isLoading:c,isAuthenticated:!!r,login,register,logout:()=>{i.logout(),n(null)},updateUser},children:t})}function useAuth(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8960:function(e){!function(){var t={229:function(e){var t,r,s,a=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var n=[],i=!1,o=-1;function cleanUpNextTick(){i&&s&&(i=!1,s.length?n=s.concat(n):o=-1,n.length&&drainQueue())}function drainQueue(){if(!i){var e=runTimeout(cleanUpNextTick);i=!0;for(var t=n.length;t;){for(s=n,n=[];++o<t;)s&&s[o].run();o=-1,t=n.length}s=null,i=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];n.push(new Item(e,t)),1!==n.length||i||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=noop,a.addListener=noop,a.once=noop,a.off=noop,a.removeListener=noop,a.removeAllListeners=noop,a.emit=noop,a.prependListener=noop,a.prependOnceListener=noop,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function __nccwpck_require__(e){var s=r[e];if(void 0!==s)return s.exports;var a=r[e]={exports:{}},n=!0;try{t[e](a,a.exports,__nccwpck_require__),n=!1}finally{n&&delete r[e]}return a.exports}__nccwpck_require__.ab="//";var s=__nccwpck_require__(229);e.exports=s}()},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(2265),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var s,n={},l=null,d=null;for(s in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!c.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:a,type:e,key:l,ref:d,props:n,_owner:o.current}}t.Fragment=n,t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=3810)}),_N_E=e.O()}]);